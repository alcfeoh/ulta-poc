<div>
    <label>Age: </label>
    <input type="text" name="age" />
</div>
<div>
    <label>State: </label>
    <input type="text" name="state" />
</div>

<script>
    let inputs = document.getElementsByTagName('input');
    for (const input of inputs) {
        input.addEventListener('blur', emitUpdate);
    }
    function emitUpdate(event) {
        window.top.postMessage({
            type: 'subFormUpdate',
            update:  {[event.target.name] : event.target.value},
            valid: event.target.validity.valid},
        '*');
    }
</script>
